# 入门第一个脚手架

## 创建第一个脚手架

1. 初始化项目文件

```shell
# 创建文件
mkdir ljj-cli
# 初始化npm
npm init -y
```

```sh
├── bin                        # 源代码
│   └── index.js               # 所有请求
└── package.json               # package.json
```

2. 修改 package.json 增加 bin 选项

- package.json

```json
{
  "bin": {
    "ljj": "bin/index.js"
  }
}
```

- index.js

```js
console.log('ljj-cli init')
```

3. 登录 npm 以及上传包

```shell
# 登录
npm login
# 上传包
npm publish
```

4. 下载包以及本地调试包

```shell
npm i ljj-cli -g

# 在项目中，执行该命令，会自动创建软链接
# 该项目修改的代码，会自动同步更改 指向软链接的代码
# ➜  bin ll ljj
# lrwxr-xr-x  1 lijunjun  admin    40B Jul 25 01:04 ljj -> ../lib/node_modules/ljj-cli/bin/index.js
npm link
```

5. 分包调试

```shell
# 库进行link
➜  ljj-cli-lib npm link
# 即可使用 ljj-cli-lib 里面的方法
➜  ljj-cli npm link ljj-cli-lib
```

## 脚手架本地 link 标准流程

链接本地脚手架：

```shell
cd your-cli-dir
npm link
```

链接本地库文件：

```shell
cd your-lib-dir
npm link
cd your-cli-dir
npm link your-lib
```

取消链接本地库文件：

```shell
cd your-lib-dir
npm unlink
cd your-cli-dir
# link存在
npm unlink your-lib
# link不存在
rm -rf node_modules
npm install -S your-lib
```

### 理解 npm link：

- `npm link your-lib`：将当前项目中 node_modules 下指定的库文件链接到 node 全局 node_modules 下的库文件

- `npm link`：将当前项目链接到 node 全局 node_modules 中作为一个库文件，并解析 bin 配置创建可执行文件

### 理解 npm unlink：

- `npm unlink`：将当前项目从 node 全局 node_modules 中移除

- `npm unlink` your-lib：将当前项目中的库文件依赖移除
