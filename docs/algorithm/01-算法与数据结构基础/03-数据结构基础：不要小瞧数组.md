# æ•°æ®ç»“æ„åŸºç¡€ï¼šä¸è¦å°ç§æ•°ç»„

## æ•°æ®ç»“æ„åŸºç¡€

æ•°æ®ç»“æ„ç ”ç©¶çš„æ˜¯æ•°æ®å¦‚ä½•åœ¨è®¡ç®—æœºä¸­è¿›è¡Œ`ç»„ç»‡`å’Œ`å­˜å‚¨`ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥`é«˜æ•ˆ`çš„è·å–æ•°æ®æˆ–ä¿®æ”¹æ•°æ®ï¼Œæ‰€ä»¥æœ‰äº†å„ç§æ•°æ®ç»“æ„

- æ•°æ®ç»“æ„åˆ†ç±»

[![R7BTnU.png](https://z3.ax1x.com/2021/07/06/R7BTnU.png)](https://imgtu.com/i/R7BTnU)

- æˆ‘ä»¬éœ€è¦æ ¹æ®åº”ç”¨çš„ä¸åŒï¼Œçµæ´»é€‰æ‹©æœ€åˆé€‚çš„æ•°æ®ç»“æ„

## è‡ªå®šä¹‰ Array æ•°æ®ç»“æ„

```java
public class Array<E> {
  private E[] data;
  // sizeæŒ‡å‘ æ²¡æœ‰æ•°æ®çš„ç¬¬ä¸€é¡¹
  private int size;

  /**
   * æ— å‚æ„é€  é•¿åº¦é»˜è®¤ä¸º10
   */
  public Array() {
    this(10);
  }

  /**
   * ä¼ å…¥æ•°ç»„çš„å®¹é‡æ˜¯ capacity æ‡’æƒ°
   */
  public Array(int capacity) {
    data = (E[]) new Object[capacity];
    size = 0;
  }

  /**
   * è·å–æ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•°
   * å¤§è‡´æ˜¯ data.length
   */
  public int getSize() {
    return size;
  }

  /**
   * è·å–æ•°ç»„çš„å®¹é‡
   * ç”¨æˆ·ä¼ é€’è¿›æ¥çš„æ•°ç»„é•¿åº¦,æ€»å®¹é‡
   */
  public int getCapacity() {
    return data.length;
  }

  /**
   * åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºç©º
   */
  public Boolean isEmpty() {
    return size == 0;
  }

  /**
   * å‘æ‰€æœ‰å…ƒç´ åæ·»åŠ ä¸€ä¸ªå…ƒç´ 
   */
  public void addLast(E e) {
    // å¦‚æœæ•°ç»„ä¸­çš„å…ƒç´ æ•°,å¤§äºcapacity
    // if (size == data.length) {
    //   throw new IllegalArgumentException("AddList failed.Array is full.");
    // }
    // data[size] = e;
    // size++;
    add(size, e);
  }

  /**
   * å‘ç¬¬ä¸€é¡¹å¢åŠ å…ƒç´ 
   */
  public void addFirst(E e) {
    add(0, e);
  }

  /**
   * å‘indexçš„ä½ç½®å¢åŠ å…ƒç´ e
   * @param index ä¸‹æ ‡
   * @param e æ·»åŠ çš„å…ƒç´ 
   */
  public void add(int index, E e) {
    // å¦‚æœindexæ˜¯ä¸€ä¸ªè´Ÿæ•°,æˆ–è€…index > size(è¡¨æ˜æ•°ç»„ä¸æ˜¯è¿ç»­çš„,ä¸­é—´æœ‰å¯èƒ½ä¼šæœ‰æ— æ•ˆçš„å€¼)
    if (index < 0 || index > size) {
      throw new IllegalArgumentException("add failed.Index is invalid.");
    }
    // è¿™é‡Œè¯´æ˜ä¸‹ä¸€æ¬¡åŠ æ•°æ®çš„æ—¶å€™,å°±ä¼šè¶Šç•Œäº†,æˆ‘ä»¬åœ¨è¿™é‡Œæ‰©å®¹æ•°ç»„
    if (size == data.length) {
      // throw new IllegalArgumentException("AddList failed.Array is full.");
      resize(size * 2);
    }
    //  0,1,2,3,4
    // {1,2,3,4,5}
    // ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹
    for (int i = size - 1; i >= index; i--) {
      data[i + 1] = data[i];
    }
    data[index] = e;
    size++;
  }

  private void resize(int capacity) {
    E[] newData = (E[]) new Object[capacity];
    for (int i = 0; i < size; i++) {
      newData[i] = data[i];
    }
    data = newData;
  }

  /**
   * åœ¨æ•°æ®ä¸­åˆ é™¤ä¸€ä¸ªå…ƒç´ 
   */
  public E remove(int index) {
    if (index < 0 || index >= size) {
      throw new IllegalArgumentException("delete failed.Index is invalid.");
    }

    E ret = data[index];
    // å†™è¿™ä¸ªforå¾ªç¯ ä¸€å®šè¦å°å¿ƒ æ•°ç»„å¾ˆå®¹æ˜“è¶Šç•Œ
    for (int i = index + 1; i < size; i++) {
      data[i - 1] = data[i];
    }
    size--;
    // æŠŠæœ€åä¸€ä¸ªå…ƒç´  å¼•ç”¨åˆ æ‰
    data[size] = null;
    // å¦‚æœ size æ˜¯ capacity çš„ 1/4
    // int / int åªä¼šè¿”å›int

    // ğŸ“¢ï¼šéšç€data.lengthè¶Šæ¥è¶Šå°ï¼Œdata.lengthå¯èƒ½ä¸º1ï¼Œ1 / 2 æ˜¯ç­‰äº0çš„
    // ä½†æ˜¯ resize ä¸å¯ä»¥ä¼ 0ï¼Œæ‰€ä»¥åšä¸€ä¸‹é™åˆ¶ `data.length / 2 != 0`
    if (size == data.length / 4 && data.length / 2 != 0) {
      resize(data.length / 2);
    }
    return ret;
  }

  /**
   * åˆ é™¤ç¬¬ä¸€é¡¹
   */
  public E removeFirst() {
    return remove(0);
  }

  /**
   * åˆ é™¤æœ€åä¸€é¡¹
   */
  public E removeLast() {
    return remove(size - 1);
  }

  /**
   * åˆ é™¤æŒ‡å®šçš„å…ƒç´ e
   */
  public void removeElement(int e) {
    int index = find(e);
    if (index != -1) {
      remove(index);
    }
  }

  @Override
  public String toString() {
    StringBuilder str = new StringBuilder();
    str.append(String.format("Array: size = %d , capacity = %d\n", size, data.length));
    str.append("[");
    for (int i = 0; i < size; i++) {
      str.append(data[i]);
      if (i != size - 1) {
        str.append(", ");
      }
    }
    str.append("]");
    return str.toString();
  }

  public E get(int index) {
    if (index < 0 || index >= size) {
      throw new IllegalArgumentException("get failed.");
    }
    return data[index];
  }

  public E getLast() {
    return data[size - 1];
  }
  public E getFirst() {
    return data[0];
  }

  public void set(int index, E e) {
    if (index < 0 || index >= size) {
      throw new IllegalArgumentException("set failed.");
    }
    data[index] = e;
  }

  /**
   * æ˜¯å¦åŒ…å«è¯¥é¡¹
   */
  public boolean contains(E target) {
    for (int i = 0; i < size; i++) {
      if (data[i].equals(target)) {
        return true;
      }
    }
    return false;
  }

  /**
   * æŸ¥æ‰¾ç´¢å¼•
   */
  public int find(int target) {
    for (int i = 0; i < size; i++) {
      if (data[i].equals(target)) {
        return i;
      }
    }
    return -1;
  }
}

```
