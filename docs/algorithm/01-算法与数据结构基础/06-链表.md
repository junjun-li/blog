# é“¾è¡¨

## ç®€ä»‹

- `é“¾è¡¨`æ˜¯æœ€ç®€å•çš„`åŠ¨æ€æ•°æ®ç»“æ„`

- å­¦ä¹ é“¾è¡¨ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è·Ÿæ·±å…¥çš„ç†è§£`å¼•ç”¨(æŒ‡é’ˆ)`ï¼Œä¹Ÿå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´æ·±å…¥çš„ç†è§£é€’å½’ï¼Œå¯ä»¥è¾…åŠ©ç»„æˆå…¶ä»–æ•°æ®ç»“æ„

[![f3dTPI.png](https://z3.ax1x.com/2021/08/09/f3dTPI.png)](https://imgtu.com/i/f3dTPI)

## é“¾è¡¨çš„å®ç°

```java
public class LinkedList<E> {
  private class Node {
    public E data;
    public Node next;

    public Node(E data, Node next) {
      this.data = data;
      this.next = next;
    }

    public Node(E data) {
      this.data = data;
      this.next = null;
    }

    public Node() {
      this.data = null;
      this.next = null;
    }

    public String toString() {
      return data.toString();
    }
  }

  private final Node dummyHead;
  private int size;

  public LinkedList() {
    // è¿™é‡Œä½¿ç”¨ä¸€ä¸ªè™šæ‹Ÿå¤´èŠ‚ç‚¹æ¥è¡¨ç¤ºé“¾è¡¨çš„å¤´ï¼Œæ˜¯ä¸æ˜¯å¾ˆé…·ğŸ˜
    dummyHead = new Node();
    size = 0;
  }

  public int getSize() {
    return size;
  }

  public boolean isEmpty() {
    return size == 0;
  }

  public void add(E data, int index) {
    if (index < 0 || index > size) {
      throw new IllegalArgumentException("Add fail! Index is illegal.");
    }
    Node prev = dummyHead;
    for (int i = 0; i < index; i++) {
      prev = prev.next;
    }
    // Node node = new Node(data);
    // node.next = prev.next;
    // prev.next = node;
    prev.next = new Node(data, prev.next);
    size++;
  }

  public void addFirst(E data) {
    add(data, 0);
  }

  public void addLast(E data) {
    add(data, size);
  }

  public E get(int index) {
    if (index < 0 || index >= size) {
      throw new IllegalArgumentException("Get fail! Index is illegal.");
    }
    Node prev = dummyHead;
    for (int i = 0; i < index; i++) {
      prev = prev.next;
    }
    return prev.next.data;
  }

  public E getFirst() {
    return get(0);
  }

  public E getLast() {
    return get(size - 1);
  }

  public boolean contains(E data) {
    Node current = dummyHead.next;
    while (current != null) {
      if (current.data.equals(data)) {
        return true;
      }
      current = current.next;
    }
    return false;
  }

  public E remove(int index) {
    if (index < 0 || index >= size) {
      throw new IllegalArgumentException("Get fail! Index is illegal.");
    }
    Node prev = dummyHead;
    for (int i = 0; i < index; i++) {
      prev = prev.next;
    }
    // éœ€è¦è¢«åˆ é™¤çš„å…ƒç´ 
    Node res = prev.next;
    // ä¸Šä¸€ä¸ªçš„next == è¢«åˆ é™¤çš„å…ƒç´ çš„next
    prev.next = res.next;
    // è¢«åˆ é™¤çš„å…ƒç´ çš„next é‡Šæ”¾æ‰
    res.next = null;
    size--;
    return res.data;
  }

  public E removeFirst() {
    return remove(0);
  }

  public E removeLast() {
    return remove(size - 1);
  }

  @Override
  public String toString() {
    StringBuilder str = new StringBuilder();
    Node current = dummyHead.next;
    while (current != null) {
      str.append(current.data).append("->");
      current = current.next;
    }
    str.append("NULL");
    return str.toString();
  }

  public static void main(String[] args) {
    LinkedList<Integer> link = new LinkedList<>();
    link.addLast(0);
    link.addLast(1);
    link.addLast(2);
    link.addLast(3);
    link.addLast(4);
    System.out.println(link);

    link.removeFirst();
    System.out.println(link);

    link.removeLast();
    System.out.println(link);

    System.out.println("0æ˜¯å¦å­˜åœ¨: " + link.contains(0));
    System.out.println("5æ˜¯å¦å­˜åœ¨: " + link.contains(5));
    System.out.println("é“¾è¡¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯: " + link.getFirst());
    System.out.println("é“¾è¡¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ æ˜¯: " + link.getLast());
    System.out.println("ä¸€å…±æœ‰" + link.getSize() + "ä¸ªå…ƒç´ ");
  }
}
```

## ä½¿ç”¨é“¾è¡¨å®ç°æ ˆ

```java
public class LinkedListStack<E> implements Stack<E> {
  public LinkedList<E> link;

  public LinkedListStack() {
    link = new LinkedList<>();
  }

  @Override
  public void push(E e) {
    link.addFirst(e);
  }

  @Override
  public E pop() {
    if (link.isEmpty()) {
      throw new IllegalArgumentException("Cannot pop from an empty stack");
    }
    return link.removeFirst();
  }

  @Override
  public E peek() {
    return link.getFirst();
  }

  @Override
  public int getSize() {
    return link.getSize();
  }

  @Override
  public boolean isEmpty() {
    return link.isEmpty();
  }

  @Override
  public String toString() {
    return link.toString();
  }

  public static void main(String[] args) {
    LinkedListStack<Integer> link = new LinkedListStack<>();
    link.push(1);
    link.push(2);
    link.push(3);
    System.out.println(link);
    System.out.println(link.pop());
    System.out.println(link);
  }
}

```

## ä½¿ç”¨é“¾è¡¨å®ç°ä¸€ä¸ªé˜Ÿåˆ—

[![5PIsLn.png](https://z3.ax1x.com/2021/10/08/5PIsLn.png)](https://imgtu.com/i/5PIsLn)

```java
public class LinkedListQueue<E> implements IQueue<E> {
  private class Node {
    public E e;
    public Node next;

    public Node(E e, Node next) {
      this.e = e;
      this.next = next;
    }

    public Node(E e) {
      this(e, null);
    }

    public Node() {
      this(null, null);
    }

    @Override
    public String toString() {
      return e.toString();
    }
  }

  public Node head, tail;
  public int size;

  public LinkedListQueue() {
    size = 0;
    head = null;
    tail = null;
  }

  @Override
  public int getSize() {
    return size;
  }

  @Override
  public boolean isEmpty() {
    return size == 0;
  }

  // å…¥é˜Ÿ
  @Override
  public void enqueue(E e) {
    Node node = new Node(e);
    if (tail == null) {
      tail = node;
      head = tail;
    } else {
      tail.next = node;
      tail = node;
    }
    size++;
  }

  @Override
  public E dequeue() {
    if (isEmpty()) {
      throw new IllegalArgumentException("Cannot dequeue from an empty queue.");
    }
    Node res = head;
    head = res.next;
    res.next = null;
    size--;
    // è¿™é‡Œè¯´æ˜,å·²ç»æ˜¯ä¸€ä¸ªç©ºé˜Ÿåˆ—äº†,éœ€è¦æŠŠå¤´å…ƒç´ ä¹Ÿåˆ é™¤
    if (head == null) {
      tail = null;
    }
    return res.e;
  }

  @Override
  public E getFront() {
    if (!isEmpty()) {
      throw new IllegalArgumentException("Queue is empty");
    }
    return head.e;
  }

  @Override
  public String toString() {
    StringBuilder res = new StringBuilder();
    res.append("Queue: front ");

    Node cur = head;
    while (cur != null) {
      res.append(cur).append("->");
      cur = cur.next;
    }
    res.append("NULL tail");
    return res.toString();
  }

  public static void main(String[] args) {

    LinkedListQueue<Integer> queue = new LinkedListQueue<>();
    for (int i = 0; i < 10; i++) {
      queue.enqueue(i);
      System.out.println(queue);

      if (i % 3 == 2) {
        queue.dequeue();
        System.out.println(queue);
      }
    }
  }
}
```

## é“¾è¡¨çš„æ€§èƒ½é—®é¢˜

è™½ç„¶çŒ›åœ°çœ‹ä¸Šå»ï¼Œå¦‚æœæˆ‘ä»¬åªåœ¨é“¾è¡¨å¤´æ·»åŠ å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(1) çš„ã€‚åŒæ—¶ï¼Œå› ä¸ºä½¿ç”¨é“¾è¡¨ä¸éœ€è¦`resize`ï¼Œæ‰€ä»¥ï¼Œå‡­ç›´è§‰ï¼Œé“¾è¡¨çš„æ€§èƒ½åº”è¯¥æ›´å¥½ã€‚

ä½†å®é™…ä¸Šï¼Œå½“æ•°æ®é‡è¾¾åˆ°ä¸€å®šç¨‹åº¦ï¼Œé“¾è¡¨çš„æ€§èƒ½æ˜¯æ›´å·®çš„ã€‚

è¿™æ˜¯å› ä¸ºï¼Œå¯¹äºé“¾è¡¨æ¥è¯´ï¼Œæ¯æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œéƒ½éœ€è¦é‡æ–°åˆ›å»ºä¸€ä¸ª Node ç±»çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯éƒ½éœ€è¦è¿›è¡Œä¸€æ¬¡ new çš„å†…å­˜æ“ä½œã€‚è€Œå¯¹å†…å­˜çš„æ“ä½œï¼Œæ˜¯éå¸¸æ…¢çš„ã€‚

## åŠ›æ‰£ 203. ç§»é™¤é“¾è¡¨å…ƒç´ 

```java
public class Test {
  public static class ListNode {
    int val;
    ListNode next;

    ListNode() {
    }

    ListNode(int val) {
      this.val = val;
    }

    ListNode(int val, ListNode next) {
      this.val = val;
      this.next = next;
    }

    ListNode(int[] arr) {
      if (arr == null || arr.length == 0) {
        throw new IllegalArgumentException("Arr Cannot be empty.");
      }
      this.val = arr[0];
      ListNode cur = this;
      for (int i = 1; i < arr.length; i++) {
        cur.next = new ListNode(arr[i]);
        cur = cur.next;
      }
    }

    public String toString() {
      ListNode cur = this;
      StringBuilder str = new StringBuilder();
      while (cur != null) {
        str.append(cur.val).append(" -> ");
        cur = cur.next;
      }
      str.append("NULL");
      return str.toString();
    }
  }

  private static class Solution {
    /**
     * æ–¹æ³•1: ä¸ä½¿ç”¨è™šæ‹Ÿå¤´ç»“ç‚¹
     * @param head
     * @param val
     * @return
     */
    public ListNode removeElements(ListNode head, int val) {
      // 1. å…ˆè¯•ç”¨whileå¾ªç¯,åˆ¤æ–­å¤´ç»“ç‚¹æ˜¯å¦éœ€è¦è¢«åˆ é™¤,
      // 1.1 å› ä¸ºåˆ é™¤äº†é“¾è¡¨å¤´çš„å…ƒç´ ä¹‹å,ä¸‹ä¸€ä¸ªå…ƒç´ è¿˜å¯èƒ½éœ€è¦è¢«åˆ é™¤,æ‰€ä»¥è¿™é‡Œéœ€è¦ç”¨whileå¾ªç¯
      // ä¾‹å¦‚: 6->6->0->1->2->NULL
      while (head != null && head.val == val) {
        // 2. åˆ é™¤è¯¥èŠ‚ç‚¹
        ListNode delListNode = head;
        // 2.1 headæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ 
        head = head.next;
        // 2.2 è¢«åˆ é™¤çš„å…ƒç´ å’Œé“¾è¡¨æ–­å¼€å…³ç³»
        delListNode.next = null;
      }
      // 3. å¦‚æœé“¾è¡¨ä¸­å…¨éƒ¨å…ƒç´ éƒ½æ˜¯ä¸€æ ·çš„,ä¾‹å¦‚ 6->6->6->6,å°±ç›´æ¥return
      if (head == null) {
        return null;
      }
      // 4. è¿™ä¸ªæ—¶å€™,è¡¨å¤´å…ƒç´ è‚¯å®šä¸æ˜¯éœ€è¦åˆ é™¤çš„å…ƒç´ äº†,å°±éœ€è¦åˆ¤æ–­ä¸‹ä¸€ä¸ªå…ƒç´ æ˜¯å¦éœ€è¦åˆ é™¤
      ListNode prev = head;
      while (prev.next != null) {
        // 5. å¦‚æœæœ‰ä¸‹ä¸€ä¸ªå…ƒç´  && ä¸‹ä¸€ä¸ªå…ƒç´ ç­‰äºéœ€è¦åˆ é™¤çš„å…ƒç´ ,ä½¿ç”¨ä¸Šè¯‰æ–¹å¼åˆ é™¤ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
        if (prev.next.val == val) {
          ListNode delRes = prev.next;
          prev.next = delRes.next;
          delRes.next = null;
        } else {
          // 6. ä¸Šè¯‰ifè¯­å¥ä¸èƒ½ç›´æ¥ç›´æ¥èµ°ä¸‹é¢è¿™è¡Œä»£ç ,å› ä¸º prev.next ä¹Ÿå¯èƒ½æ˜¯éœ€è¦åˆ é™¤çš„å…ƒç´ , èµ°whileå¾ªç¯ä»æ–°è¿‡ä¸€é
          prev = prev.next;
        }
      }
      return head;
    }

    /**
     * æ–¹æ³•2: ä½¿ç”¨è™šæ‹Ÿå¤´ç»“ç‚¹
     */
    // public ListNode removeElements(ListNode head, int val) {
    //   ListNode dummyHead = new ListNode(-1, head);
    //   ListNode prev = dummyHead;
    //   while (prev.next != null) {
    //     if (prev.next.val == val) {
    //       ListNode delListNode = prev.next;
    //       prev.next = delListNode.next;
    //       delListNode.next = null;
    //     } else {
    //       prev = prev.next;
    //     }
    //   }
    //   return dummyHead.next;
    // }
  }

  public static void main(String[] args) {
    // int[] arr = {1, 2, 6, 3, 4, 5, 6};
    int[] arr = {7, 7, 7, 7};
    ListNode listNode = new ListNode(arr);
    System.out.println(listNode);

    ListNode res = (new Solution()).removeElements(listNode, 7);
    System.out.println(res);
  }
}
```
